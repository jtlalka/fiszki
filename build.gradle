/**
 * Gradle main build script
 */
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.3.3'

        // Retro-lambda
        classpath 'me.tatarka:gradle-retrolambda:3.4.0'
        classpath 'me.tatarka.retrolambda.projectlombok:lombok.ast:0.2.3.a2'
    }

    // Retro-lambda lint fix
    configurations {
        classpath.exclude group: 'com.android.tools.external.lombok'
    }
}

/**
 * Gradle all projects setup
 */
allprojects {
    repositories {
        jcenter()
    }

    task checkstyle(type: Checkstyle) {
        group = 'Verification'
        description 'Runs Checkstyle inspection against Android sourcesets.'

        configFile file('./checkstyle.xml')
        source 'src'
        include '**/*.java'

        ignoreFailures false
        showViolations true

        maxErrors 0
        maxWarnings 0

        classpath = files()
    }
}
